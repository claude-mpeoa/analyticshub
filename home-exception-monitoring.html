<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Analytics Checklist</title>
    <style>
        /* --- RESET & VARIABLES --- */
        :root {
            --sidebar-width: 280px;
            --primary-color: #2563eb;     /* Royal Blue */
            --primary-hover: #1d4ed8;
            --sidebar-bg: #0f172a;        /* Slate 900 */
            --sidebar-text: #e2e8f0;      /* Slate 200 */
            --bg-color: #f1f5f9;          /* Slate 100 */
            --text-color: #334155;        /* Slate 700 */
            --card-bg: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: row;
        }

        /* --- STICKY SIDEBAR NAVIGATION (UNMODIFIED) --- */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--sidebar-bg);
            color: var(--sidebar-text);
            height: 100vh;
            position: sticky;
            top: 0;
            display: flex;
            flex-direction: column;
            padding: 1.5rem;
            box-shadow: 4px 0 10px rgba(0,0,0,0.1);
            flex-shrink: 0;
            z-index: 10;
            overflow-y: auto;
        }

        .brand {
            font-size: 1.5rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 2.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 1rem;
            border-bottom: 1px solid #334155;
        }

        .brand span {
            color: var(--primary-color);
        }

        .nav-links {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .nav-links a {
            text-decoration: none;
            color: #94a3b8;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 500;
        }

        .nav-links a:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: #fff;
            transform: translateX(5px);
        }

        .nav-links a.active {
            background-color: var(--primary-color);
            color: #fff;
            box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.4);
        }

        .nav-section-title {
            text-transform: uppercase;
            font-size: 0.75rem;
            color: #64748b;
            margin-top: 2rem;
            margin-bottom: 0.75rem;
            letter-spacing: 0.05em;
            font-weight: 700;
        }

        /* --- MAIN CONTENT AREA --- */
        .main-content {
            flex: 1;
            padding: 2.5rem;
            overflow-y: auto;
        }

        header {
            margin-bottom: 3rem;
        }

        h1 {
            font-size: 2rem;
            color: #1e293b;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            color: #64748b;
            font-size: 1.1rem;
        }
        
        /* --- TO DO LIST STYLING --- */
        .checklist-container {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 2.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            max-width: 800px;
            margin: 0 auto; /* Center the list */
        }

        .checklist {
            list-style: none;
            padding: 0;
        }

        .checklist li {
            display: flex;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid #e2e8f0;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .checklist li:last-child {
            border-bottom: none;
        }

        .checklist li:hover {
            background-color: #f8fafc;
        }

        .checklist input[type="checkbox"] {
            margin-right: 1.25rem;
            width: 20px;
            height: 20px;
            min-width: 20px; /* Ensure space for checkbox */
            appearance: none;
            border: 2px solid #94a3b8;
            border-radius: 6px;
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
        }

        .checklist input[type="checkbox"]:checked {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        /* Checkmark icon */
        .checklist input[type="checkbox"]:checked::after {
            content: '✓';
            color: white;
            font-size: 1rem;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            line-height: 1;
        }

        .checklist label {
            flex-grow: 1;
            font-size: 1.1rem;
            font-weight: 500;
            color: var(--text-color);
            transition: color 0.2s, text-decoration 0.2s;
        }

        .checklist input[type="checkbox"]:checked + label {
            color: #94a3b8; /* Faded color */
            text-decoration: line-through;
        }


        /* --- MOBILE RESPONSIVENESS (UNMODIFIED) --- */
        @media (max-width: 900px) {
            body {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
                padding: 1rem;
            }

            .sidebar .nav-links {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
            }

            .nav-section-title, .brand {
                text-align: center;
                justify-content: center;
            }

            .brand { margin-bottom: 1rem; }
            
            .nav-section-title {
                width: 100%;
                margin-top: 1rem;
            }
            .checklist-container {
                padding: 1.5rem;
            }
        }
        
        @media (max-width: 600px) {
            .sidebar .nav-links {
                display: block; /* Stack links on very small screens */
            }
            .main-content {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>

    <nav class="sidebar">
        <div class="brand">
            <span>◆</span> ANALYTICS HUB
        </div>

        <div class="nav-section-title">Main Menu</div>
        <ul class="nav-links">
            <li><a href="home-main.html"  >Home</a></li>
            <li id="link-tasks"><a href="home-tasks.html">Analytics Tasks</a></li>
            <li id="link-exceptions"><a href="home-exception-monitoring.html"  class="active">Exception Monitoring</a></li>
        </ul>

        <div class="nav-section-title">Resources</div>
        <ul class="nav-links">
            <li id="link-dashboards"><a href="resources-marketing-dashboards.html">Sales & Marketing Reports</a></li>
            <li id="link-powerbi"><a href="resources-powerbi-dashboards.html">Power BI Reports</a></li>
            <li id="link-planning"><a href="resources-planning-budgeting.html">Planning and Budgeting Documents</a></li>
            <li id="link-adhoc"><a href="resources-adhoc-requests.html">Ad-Hoc Requests</a></li>
            <li id="link-projects"><a href="resources-projects.html">Analytics Projects</a></li>
            <li id="link-documents"><a href="resources-documents-processes.html">Documents & Processes</a></li>
            
        </ul>
        
        <div style="margin-top: auto; padding-top: 2rem; border-top: 1px solid #334155;">
             <ul class="nav-links">
                <li><a href="login.html">⟳ Logout</a></li>
             </ul>
        </div>
    </nav>

    <main class="main-content">
        <header>
            <h1>Daily Process Checklist</h1>
            <p class="subtitle">Confirm successful completion of all mission-critical daily data processes.</p>
        </header>

        <div class="checklist-container">
            <ul class="checklist" id="dailyChecklist">
                </ul>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const tasks = [
                "All Power BI Processes have ran successfully",
                "Daily download of Leads successful",
                "Daily download of Sales successful",
                "Daily download of Revenue successful",
                "Update to Main Google sheet successful (Main, Leads, Sales, Revenue)",
                "Update to Business Results Safe successful (Meta Ads)",
                "Analytics Hub Dashboard Updated",
                "To do list updated under Analytics Tasks",
                "Emails Checked for high priority requests and all tasks added to the Tasks/to do list"
            ];

            const checklist = document.getElementById('dailyChecklist');

            // Function to generate the HTML for a single task
            function createTaskElement(taskText, index) {
                const li = document.createElement('li');
                // Use a unique ID for the checkbox and link it to the label
                const checkboxId = 'task' + index; 
                
                li.innerHTML = `
                    <input type="checkbox" id="${checkboxId}" onclick="toggleTaskCompletion(this)">
                    <label for="${checkboxId}">${taskText}</label>
                `;
                return li;
            }

            // Populate the checklist
            tasks.forEach((task, index) => {
                checklist.appendChild(createTaskElement(task, index));
            });
            
            // NOTE: The checkboxes will automatically be unchecked/clear every time
            // the page is loaded (refreshed) because we are not saving their state
            // to local storage or a server.

            // Global function to allow the onclick attribute in the HTML to work
            window.toggleTaskCompletion = function(checkbox) {
                // This function is mainly for interaction, the clearing happens on page load.
                // The styling handles the strike-through effect.
            };
        });
    </script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // 1. Get the current user's role from local storage.
        const userRole = localStorage.getItem('userRole');

        // Stop execution if no role is found (should prompt for login or handle error)
        if (!userRole) {
            console.warn('User role not found in local storage. Restricting all access.');
            return;
        }

        // 2. Define the Access Control Lists (ACLs) by Link ID.
        // The list must contain roles exactly as they are saved in the login script.
        const accessLists = {
            // Main Menu Links
            "link-tasks": ['Administrator', 'Developer', 'Analyst', 'Marketing Executive'],
            "link-exceptions": ['Administrator', 'Developer', 'Analyst'],

            // Resources Links
            "link-dashboards": [
                'Administrator', 'Developer', 'Analyst', 'Sales Executive', 'Finance Executive', 
                'Marketing Executive', 'Operations Executive', 'Marketing Paid Search Channel Manager', 
                'Marketing Paid Social Channel Manager', 'Marketing Organic Search Channel Manager', 
                'Marketing Direct Channel Manager'
            ],
            "link-powerbi": ['Administrator', 'Developer', 'Analyst', 'Marketing Executive'],
            "link-planning": ['Administrator', 'Developer', 'Analyst', 'Finance Executive', 'Marketing Executive'],
            "link-adhoc": ['Administrator', 'Developer', 'Analyst', 'Marketing Executive'],
            "link-projects": ['Administrator', 'Developer', 'Analyst', 'Marketing Executive'],

            // Bottom Menu Links
            "link-settings": ['Administrator', 'Developer', 'Analyst', 'Marketing Executive'],

	// ReportsandDashboards
	"daily-dashboard":['Administrator', 'Developer', 'Analyst', 'Sales Executive', 'Finance Executive', 'Marketing Executive'],
	"marketing-performance-dashboard":['Administrator', 'Developer', 'Analyst', 'Sales Executive', 'Finance Executive', 'Marketing Executive'],
	"paid-search-performance-dashboard":['Administrator', 'Developer', 'Analyst','Marketing Paid Search Channel Manager' ],
	"paid-social-performance-dashboard":['Administrator', 'Developer', 'Analyst','Marketing Paid Social Channel Manager' ],
	"direct-organic-performance-dashboard":['Administrator', 'Developer', 'Analyst','Marketing Organic Search Channel Manager' ]

        };

        // 3. Iterate through the access lists and apply restrictions.
        for (const [linkId, allowedRoles] of Object.entries(accessLists)) {
            const linkElement = document.getElementById(linkId);
            
            // Check if the link element exists and if the user's role is NOT in the allowed list.
            if (linkElement && !allowedRoles.includes(userRole)) {
                linkElement.style.display = 'none';
            }
        }
    });
</script>
	<script src="/_vercel/insights/script.js" defer></script>
</body>

</html>
